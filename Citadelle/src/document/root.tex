\documentclass[11pt,a4paper,openright,twoside,abstracton]{scrreprt}
\usepackage{isabelle,isabellesym}
\usepackage[nocolortable, noaclist]{hol-ocl-isar}
\usepackage{fmde-acronyms}
\usepackage{paralist}
\usepackage{booktabs}
\usepackage{graphicx}
\usepackage{amssymb}
\usepackage[numbers, sort&compress, sectionbib]{natbib}
\usepackage[caption=false]{subfig}
\usepackage{lstisar}
\usepackage{paralist}
\usepackage[]{mathtools}
\usepackage[pdfpagelabels, pageanchor=false, plainpages=false]{hyperref}
\usepackage{prooftree}

\renewcommand{\HolTrue}{\mathrm{true}}
\renewcommand{\HolFalse}{\mathrm{false}}

\newcommand{\ptmi}[1]{\using{\mi{#1}}}


\newcommand{\Lemma}[1]{{\color{BrickRed}%
    \mathbf{\operatorname{lemma}}}~\text{#1:}\quad}
\newcommand{\testspec}[1]{{\color{BrickRed}%
    \mathbf{\operatorname{testspec}}}~\text{#1:}\quad}

%% end prof mode
\newcommand{\done}{{\color{OliveGreen}\operatorname{done}}}
\newcommand{\by}[1]{{\color{OliveGreen}%
    \operatorname{by}}(\text{#1})}

%% regular commands
\newcommand{\primrec}{{\holoclthykeywordstyle\operatorname{primrec}}}
\newcommand{\shows}{{\holoclthykeywordstyle%
    \operatorname{shows}}\enspace}
\newcommand{\recdef}{{\holoclthykeywordstyle%
    \operatorname{recdef}}\enspace}
\newcommand{\have}[1]{{\holoclthykeywordstyle%
    \operatorname{have}}~\text{#1:}\enspace}
\newcommand{\Show}[1]{{\holoclthykeywordstyle%
    \operatorname{show}}~\text{#1}\enspace}
\newcommand{\Proof}{{\holoclthykeywordstyle%
    \operatorname{proof}}}
\newcommand{\assumes}[1]{{\holoclthykeywordstyle%
    \operatorname{assumes}}~\text{#1:}\enspace}
\newcommand{\storeTestThm}[1]{{\holoclthykeywordstyle%
    \operatorname{store\_test\_thm}}~\text{#1}}
\newcommand{\apply}[1]{{\holoclthykeywordstyle%
    \operatorname{apply}}(\text{#1})}
\newcommand{\testgenParams}[1]{{\holoclthykeywordstyle%
    \operatorname{testgen\_params}}\;[\text{#1}]}
\newcommand{\genTestData}[1]{{\holoclthykeywordstyle%
    \operatorname{gen\_test\_data}}~\text{#1}}

\newcommand{\genTestScript}[4]{{\holoclthykeywordstyle%
    \operatorname{gen\_test\_script}}~\text{\texttt{#1}}
  {~\text{#2}}
  {~#3}
  {~{\mathtt{#4}}}
}
\newcommand{\consts} {{\holoclthykeywordstyle\operatorname{consts}}}
\newcommand{\constdefs} {{\holoclthykeywordstyle\operatorname{constdefs}}}
\newcommand{\defs} {{\holoclthykeywordstyle\operatorname{defs}}}
\newcommand{\fun} {{\holoclthykeywordstyle\operatorname{fun}}}
\newcommand{\definitionS} {{\holoclthykeywordstyle\operatorname{definition}}}
\newcommand{\where} {{\holoclthykeywordstyle\operatorname{where}}}
\newcommand{\datatype} {{\holoclthykeywordstyle\operatorname{datatype}}}
\newcommand{\intros} {{\holoclthykeywordstyle\operatorname{intros}}}
\newcommand{\inductive}[1]{{\holoclthykeywordstyle\operatorname{inductive}}~\operatorname{#1}}
\newcommand{\types} {{\holoclthykeywordstyle\operatorname{types}}}
\newcommand{\pglabel}[1]{\text{#1}}
% \newcommand{\primrec}{\operatorname{\holoclthykeywordstyle primrec}}
% \newcommand{\consts} {\operatorname{\holoclthykeywordstyle consts}}





\newMathOcl{Plus}{\mathbin}{+}
\newMathOcl{Minus}{\mathbin}{-}
\newMathOcl{Divide}{\mathbin}{/}
\newMathOcl{Neg}{\mathop}{-}
\newMathOcl{Mult}{\mathbin}{\cdot}
\newMathOcl{Zero}{\mathord}{\mathocl{0}}
\newMathOcl{DigitOne}{\mathord}{\mathocl{1}}
\newMathOcl{Two}{\mathord}{\mathocl{2}}
\newMathOcl{Three}{\mathord}{\mathocl{3}}
\newMathOcl{Four}{\mathord}{\mathocl{4}}
\newMathOcl{Five}{\mathord}{\mathocl{5}}
\newMathOcl{Six}{\mathord}{\mathocl{6}}
\newMathOcl{Seven}{\mathord}{\mathocl{7}}
\newMathOcl{Eight}{\mathord}{\mathocl{8}}
\newMathOcl{Nine}{\mathord}{\mathocl{9}}

\renewcommand{\OclFalse}{\mathtt{false}}
\renewcommand{\OclTrue}{\mathtt{true}}
\renewcommand{\OclUndef}{\mathtt{invalid}}

\newOcl{IsInvalid}{\mathop}{.oclIsInvalid()}
\renewcommand{\isasymOclUndefined}{\ensuremath{\mathtt{invalid}}}
\newcommand{\isasymOclNull}{\ensuremath{\mathtt{null}}}
\newcommand{\isasymOclInvalid}{\isasymOclUndefined}
\newcommand{\nullid}{\ensuremath{\mathtt{nullid}}}
\newcommand{\Tag}[1]{\ensuremath{\mathrm{#1}_{\text{t}}}}
\newcommand{\CM}{\mathit{CM}}
\DeclareMathOperator{\pre}{pre}
\DeclareMathOperator{\post}{post}
\DeclareMathOperator{\prog}{prog}
\DeclareMathOperator{\spec}{spec}
\DeclareMathOperator{\inv}{inv}

\newcommand{\eqPre}{\mathbin{\stackrel{\text{pre}}{=}}}
\newcommand{\eqPost}{\mathbin{\stackrel{\text{post}}{=}}}
\newcommand{\modelsPre}{\mathbin{\isasymMathOclValid_\text{pre}}}
\newcommand{\modelsPost}{\mathbin{\isasymMathOclValid_\text{post}}}
%%

\newcommand{\Null}[1]{{\ensuremath{\mathtt{null}_\text{{#1}}}}}
\newcommand{\isdef}[1]{#1\isasymOclIsDefined}

\newtheorem{definition}{}

\newcommand{\obj}{\mathit{obj}}

\newcommand{\testgen}{\acs{hol}-TestGen\xspace}
\DeclareMathOperator{\vars}{\mathit{vars}}
\renewcommand{\to}{\Rightarrow}
\newcommand{\HolRef}{\mathrm{ref}}
\newcommand{\HolOption}{\mathrm{option}}
\newcommand{\term}{\mathrm{term}}
\newcommand{\ran}{\mathrm{ran}}
\newcommand{\dom}{\mathrm{dom}}
\newcommand{\ind}{\mathrm{ind}}
\newcommand{\order}{\mathrm{order}}
\newcommand{\typedef}{\mathrm{typedef}}
\DeclareMathOperator{\upCase}{upCase}
\DeclareMathOperator{\optionCase}{optionCase}
\DeclareMathOperator{\image}{image}
\DeclareMathOperator{\fix}{fix}

\newcommand{\mi}[1]{\,\text{#1}}
\newcommand{\state}[1]{\ifthenelse{\equal{}{#1}}%
  {\operatorname{state}}%
  {\operatorname{\mathit{state}}(#1)}%
}

\renewcommand{\ofType}{\mathbin{::}}
\newcommand{\mocl}[1]{\text{\inlineocl{#1}}}
\DeclareMathOperator{\TCnull}{null}
\DeclareMathOperator{\HolNull}{null}
\DeclareMathOperator{\HolBot}{bot}

\graphicspath{{data/},{figures/}}

\newtheorem{example}{Example}


% urls in roman style, theory text in math-similar italics
\urlstyle{rm}
\isabellestyle{it}
\newcommand{\ie}{i.\,e.\xspace}
\newcommand{\eg}{e.\,g.\xspace}
\renewcommand{\isamarkupheader}[1]{\chapter{#1}}
\renewcommand{\isamarkupsection}[1]{\section{#1}}
\renewcommand{\isamarkupsubsection}[1]{\subsection{#1}}
\renewcommand{\isamarkupsubsubsection}[1]{\subsubsection{#1}}
\renewcommand{\isamarkupsect}[1]{\section{#1}}
\renewcommand{\isamarkupsubsect}[1]{\susubsection{#1}}
\renewcommand{\isamarkupsubsubsect}[1]{\subsubsection{#1}}

\begin{document}

\title{Featherweight OCL}
\subtitle{A Study for a Consistent Semantics of UML/OCL 2.3 in HOL}
\subject{Extended Version}
\author{Achim D. Brucker \and Delphine Longuet \and Fr\'ed\'eric Tuong \and Burkhart Wolff}


\maketitle

\begin{abstract}
  \UML/\OCL is one of the few modeling languages that is widely used in industry.
  Besides numerous diagrams describing various aspects of models, the core of the \UML,
  the language \OCL,
  is a textual annotation language that turns it into a formal language.
  Unfortunately the semantics of this specification language, captured in the ``Annex A''
  of the \OCL standard leads to different interpretations of corner cases and had been subject
  to formal analysis earlier. %% TODO: add ocl papers
  The situation complicated when with version 2.3 the \OCL was aligned with the \UML; this
  led to the extension of the three-valued logic by a second exception element, called \mocl{null}.
  While the first exception element \mocl{undefined} has a strict semantics, \mocl{null} has a non strict semantic
  interpretation. These semantic difficulties lead to remarkable confusion for implementors
  of \OCL compilers and interpreters. %% TODO add references to compiler bugs: Achim

  In this paper, we provide a formalization of the core of
  \OCL in \acf{hol}. It provides denotational definitions, a logical calculus
  and operational rules that allow for the execution of \OCL expressions by a mixture of
  term rewriting and code compilation.
  Our formalization reveals several
  inconsistencies and contradictions in the current version of the
  \OCL standard.  They reflect a challenge to define and implement \OCL tools in a
  uniform manner.
  This document is intended to provide the basis for a machine-checked text
  ``Annex A'' of the \UML standard targeting at tool implementors.

  \vspace{1cm}\noindent{\textbf{Further readings:}} This theory extends the paper
  ``Featherweight OCL: A study for the consistent semantics of \OCL 2.3
  in \HOL''~\cite{brucker.ea:featherweight:2012} that is published as
  part of the proceedings of the \OCL workshop 2012.
\end{abstract}



\tableofcontents

\include{introduction}
\include{formalization}
\include{conclusion}

% optional bibliography
\bibliographystyle{abbrv}
\bibliography{adb-long,root}
\listofacronyms{}

\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
